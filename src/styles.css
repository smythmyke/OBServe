* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  overflow: hidden;
  background: #0e0c0a;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

:root {
  --amber: #d4a040;
  --amber-dim: #8a6a28;
  --amber-glow: rgba(212,160,64,0.3);
  --green: #5aaa5a;
  --green-bright: #66cc66;
  --red: #cc4444;
  --red-bright: #ee5555;
  --cream: #c8b898;
  --cream-dim: #7a6a50;
  --cyan: #00d4ff;
  --magenta: #ff00aa;
}

/* ── Rack Frame ── */

.rack-frame {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

.wood-panel {
  width: 34px;
  flex-shrink: 0;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0px, transparent 4px,
      rgba(0,0,0,0.06) 4px, rgba(0,0,0,0.06) 8px
    ),
    linear-gradient(to right,
      #3a2210 0%, #5a3818 20%, #6a4420 40%,
      #5a3818 55%, #4a3014 75%, #6a4420 90%, #3a2210 100%
    );
  box-shadow: inset -3px 0 8px rgba(0,0,0,0.5);
  border-right: 1px solid #2a1a08;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-evenly;
  padding: 10px 0;
}

.wood-panel.right {
  box-shadow: inset 3px 0 8px rgba(0,0,0,0.5);
  border-right: none;
  border-left: 1px solid #2a1a08;
}

.wood-screw {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #c8a050, #8a6a30 50%, #5a4418 100%);
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.6);
  position: relative;
  flex-shrink: 0;
}

.wood-screw::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 20%;
  width: 60%;
  height: 1.5px;
  background: #4a3a18;
  transform: translateY(-50%);
}

/* ── Rack Body ── */

.rack-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow-y: auto;
  scrollbar-width: none;
  background: #080604;
}

.rack-body::-webkit-scrollbar {
  display: none;
}

/* ── Module Panel (dark brushed metal) ── */

.module {
  background:
    linear-gradient(to bottom, #1e1a16 0%, #1a1714 40%, #161310 60%, #12100e 100%);
  border-top: 1px solid #2a2620;
  border-bottom: 1px solid #0a0908;
  padding: 20px 32px;
  position: relative;
}

.module-alt {
  background:
    linear-gradient(to bottom, #262220 0%, #22201c 40%, #1e1c18 60%, #1a1816 100%);
  border-top: 1px solid #322e28;
  border-bottom: 1px solid #0e0c0a;
}

/* ── Module Screws ── */

.mod-screw {
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: radial-gradient(circle at 38% 35%, #4a4438, #2a2620 50%, #1a1714 100%);
  box-shadow:
    inset 0 1px 2px rgba(255,255,255,0.12),
    0 1px 3px rgba(0,0,0,0.6);
  z-index: 2;
}

.mod-screw::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 6px;
  height: 6px;
  border: 1px solid #1a1714;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle at 40% 35%, #3a3428, #222018);
}

.mod-screw::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 30%;
  width: 40%;
  height: 1px;
  background: #161310;
  transform: translateY(-50%) rotate(25deg);
}

.mod-screw.tl { top: 6px; left: 8px; }
.mod-screw.tr { top: 6px; right: 8px; }
.mod-screw.bl { bottom: 6px; left: 8px; }
.mod-screw.br { bottom: 6px; right: 8px; }

/* ── Panel Minimize / Remove Controls ── */

.mod-controls {
  position: absolute;
  top: 4px;
  right: 26px;
  display: flex;
  gap: 3px;
  z-index: 3;
}

.mod-ctrl-btn {
  width: 16px;
  height: 16px;
  border: 1px solid #2a2620;
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  color: var(--cream-dim);
  font-size: 10px;
  padding: 0;
  cursor: pointer;
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: auto;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  line-height: 1;
  opacity: 0;
  transition: opacity 0.15s, color 0.15s, border-color 0.15s;
}

.module:hover .mod-ctrl-btn,
.module.minimized .mod-ctrl-btn {
  opacity: 1;
}

.mod-ctrl-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
}

.mod-close:hover {
  color: var(--red);
  border-color: #5a2222;
}

.module.minimized {
  padding: 8px 32px !important;
  min-height: auto !important;
}

.module.minimized > *:not(.mod-screw):not(.mod-title):not(.mod-controls) {
  display: none !important;
}

.module.minimized .mod-screw.bl,
.module.minimized .mod-screw.br {
  bottom: 4px;
}

.module.minimized .mod-minimize {
  transform: rotate(-90deg);
}

/* ── Module Title (silk-screen label) ── */

.mod-title {
  position: absolute;
  top: 6px;
  left: 28px;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 2.5px;
  color: var(--cream-dim);
  font-weight: 600;
}

/* ── Title Module (custom titlebar) ── */

.title-module {
  background: linear-gradient(to bottom, #1a1714, #12100e);
  padding: 8px 32px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid #2a2620;
  position: relative;
  min-height: 42px;
  -webkit-app-region: drag;
}

.title-module h1 {
  font-size: 20px;
  font-weight: 300;
  letter-spacing: 8px;
  text-transform: uppercase;
  background: linear-gradient(135deg, var(--cyan), var(--magenta));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  flex-shrink: 0;
}

/* ── Grip Strip (drag handle) ── */

.grip-strip {
  flex: 1;
  height: 22px;
  margin: 0 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: grab;
  -webkit-app-region: drag;
  border-radius: 2px;
  padding: 0 12px;
}

.grip-strip:active {
  cursor: grabbing;
}

.grip-ridges {
  width: 100%;
  height: 12px;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0px,
      transparent 2px,
      rgba(255,255,255,0.04) 2px,
      rgba(255,255,255,0.04) 3px,
      transparent 3px,
      transparent 4px
    );
  border-radius: 2px;
  opacity: 0.7;
  pointer-events: none;
}

.grip-strip:hover .grip-ridges {
  opacity: 1;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0px,
      transparent 2px,
      rgba(212,160,64,0.12) 2px,
      rgba(212,160,64,0.12) 3px,
      transparent 3px,
      transparent 4px
    );
}

.title-center {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-shrink: 0;
  -webkit-app-region: no-drag;
}

.title-right {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
  -webkit-app-region: no-drag;
}

.window-controls {
  display: flex;
  gap: 4px;
  margin-left: 8px;
}

.win-btn {
  width: 24px;
  height: 20px;
  border-radius: 2px;
  border: 1px solid #2a2620;
  background: linear-gradient(to bottom, #1e1a16, #141210);
  cursor: pointer;
  padding: 0;
  min-width: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.04);
  -webkit-app-region: no-drag;
  text-transform: none;
  letter-spacing: 0;
}

.win-icon {
  font-size: 10px;
  line-height: 1;
  color: #4a4438;
  text-shadow: 0 -1px 0 rgba(0,0,0,0.6), 0 1px 0 rgba(255,255,255,0.06);
  pointer-events: none;
}

.win-btn:hover {
  border-color: var(--amber-dim);
}

.win-btn:hover .win-icon {
  color: var(--amber);
  text-shadow: 0 0 4px var(--amber-glow), 0 -1px 0 rgba(0,0,0,0.4);
}

.win-btn:active {
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.6);
  background: linear-gradient(to bottom, #12100e, #0e0c0a);
}

.win-btn:last-child:hover {
  border-color: #5a2222;
}

.win-btn:last-child:hover .win-icon {
  color: var(--red);
  text-shadow: 0 0 4px rgba(204,68,68,0.3), 0 -1px 0 rgba(0,0,0,0.4);
}

/* ── LED Indicators ── */

.led {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  border: 1px solid rgba(0,0,0,0.3);
  display: inline-block;
  flex-shrink: 0;
}

.led-green {
  background: radial-gradient(circle at 40% 35%, #99ff99, #44cc44 50%, #228822 100%);
  box-shadow: 0 0 5px #44cc44, 0 0 10px rgba(68,204,68,0.3);
}

.led-red {
  background: radial-gradient(circle at 40% 35%, #ff8888, #cc3333 50%, #882222 100%);
  box-shadow: 0 0 5px #cc3333, 0 0 10px rgba(204,51,51,0.3);
}

.led-amber {
  background: radial-gradient(circle at 40% 35%, #ffd480, var(--amber) 50%, #8a6a28 100%);
  box-shadow: 0 0 5px var(--amber), 0 0 10px var(--amber-glow);
}

.led-off {
  background: radial-gradient(circle at 40% 35%, #2a2620, #1a1714 60%, #12100e 100%);
  box-shadow: none;
}

.led-blink {
  animation: lbk 0.8s ease-in-out infinite;
}

@keyframes lbk {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.15; }
}

/* ── Hardware Buttons ── */

.hw-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  border-radius: 3px;
  color: var(--cream-dim);
  padding: 6px 16px;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 2px;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
  transition: all 0.15s;
  min-width: auto;
}

.hw-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
  background: linear-gradient(to bottom, #2a2620, #1a1714);
}

.hw-btn:active {
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.6);
  transform: translateY(1px);
}

.hw-btn.active {
  border-color: var(--amber);
  color: var(--amber);
  box-shadow: 0 0 8px var(--amber-glow), inset 0 1px 0 rgba(255,255,255,0.05);
}

.hw-btn.danger {
  border-color: #5a2222;
  color: var(--red);
}

.hw-btn.danger:hover {
  border-color: var(--red);
  box-shadow: 0 0 8px rgba(204,68,68,0.2);
}

.hw-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* ── Amber Display (sunken LCD) ── */

.amber-display {
  background: #0c0a06;
  border-radius: 3px;
  box-shadow:
    inset 2px 2px 6px rgba(0,0,0,0.8),
    inset -1px -1px 0 rgba(255,255,255,0.02),
    0 1px 0 rgba(255,255,255,0.04);
  padding: 10px 14px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 8px var(--amber-glow);
}

/* ── Bar Meters ── */

.bar-meter {
  height: 4px;
  background: #0c0a06;
  border-radius: 2px;
  overflow: hidden;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
}

.bar-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.3s;
}

.bar-amber { background: linear-gradient(to right, var(--amber-dim), var(--amber)); }
.bar-green { background: linear-gradient(to right, #2a5a2a, var(--green-bright)); }
.bar-red { background: linear-gradient(to right, #5a2222, var(--red-bright)); }

/* ── Toggle Switch (bat handle) ── */

.toggle-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
}

.toggle-body {
  width: 16px;
  height: 28px;
  background: #0c0a06;
  border-radius: 3px;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.6), 0 1px 0 rgba(255,255,255,0.03);
  position: relative;
  cursor: pointer;
}

.toggle-bat {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 14px;
  background: linear-gradient(to bottom, var(--amber), var(--amber-dim));
  border-radius: 4px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 0 4px var(--amber-glow);
}

.toggle-bat.up { top: 2px; }
.toggle-bat.down { bottom: 2px; }
.toggle-bat.off {
  background: linear-gradient(to bottom, #3a3428, #2a2418);
  box-shadow: 0 1px 4px rgba(0,0,0,0.5);
}

/* ── Form Inputs ── */

input[type="text"],
input[type="number"],
input[type="password"] {
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 6px 10px;
  color: var(--amber);
  font-size: 13px;
  width: 140px;
  font-family: 'Courier New', monospace;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5);
}

input[type="number"] {
  width: 80px;
}

input:focus {
  outline: none;
  border-color: var(--amber);
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5), 0 0 4px var(--amber-glow);
}

label {
  font-size: 13px;
  color: var(--cream-dim);
  display: flex;
  align-items: center;
  gap: 8px;
}

select {
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 5px 8px;
  color: var(--amber);
  font-size: 12px;
  cursor: pointer;
  font-family: 'Courier New', monospace;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5);
}

select:focus {
  outline: none;
  border-color: var(--amber);
}

/* ── Default button base ── */

button {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  border-radius: 3px;
  color: var(--cream-dim);
  padding: 6px 16px;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
  transition: all 0.15s;
}

button:hover:not(:disabled) {
  border-color: var(--amber-dim);
  color: var(--amber);
}

button:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* ── Badge ── */

.badge {
  font-size: 9px;
  padding: 3px 10px;
  border-radius: 2px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  font-family: 'Courier New', monospace;
}

.badge.disconnected {
  background: #1a0808;
  color: var(--red);
  border: 1px solid #3a1818;
}

.badge.connected {
  background: #081a08;
  color: var(--green);
  border: 1px solid #183a18;
}

/* ── Toolbar (mode/complexity buttons inside title module) ── */

.toolbar-group {
  display: flex;
  align-items: center;
  gap: 4px;
}

.toolbar-label {
  font-size: 8px;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-right: 4px;
  font-weight: 600;
}

.toggle-btn {
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  color: var(--cream-dim);
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 3px 10px;
  font-size: 10px;
  cursor: pointer;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  transition: all 0.15s;
}

.toggle-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
  background: linear-gradient(to bottom, #1e1a16, #12100e);
}

.toggle-btn.active {
  color: var(--amber);
  border-color: var(--amber);
  box-shadow: 0 0 6px var(--amber-glow);
  background: linear-gradient(to bottom, #1e1a16, #12100e);
}

/* ── Settings dropdown ── */

.settings-btn {
  background: none;
  border: 1px solid #2a2620;
  color: var(--cream-dim);
  font-size: 16px;
  padding: 2px 8px;
  border-radius: 3px;
  cursor: pointer;
  line-height: 1;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
}

.settings-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
}

.settings-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 32px;
  background: linear-gradient(to bottom, #1e1a16, #161310);
  border: 1px solid #2a2620;
  border-radius: 0 0 4px 4px;
  padding: 16px 20px;
  z-index: 100;
  min-width: 280px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.6);
}

.settings-dropdown.open {
  display: block;
}

.settings-row {
  margin-bottom: 10px;
}

.settings-row label {
  font-size: 13px;
  color: var(--cream-dim);
  display: flex;
  align-items: center;
  gap: 8px;
}

.toggle-row {
  margin-bottom: 12px;
}

.toggle-row label {
  font-size: 13px;
  color: var(--cream-dim);
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.settings-divider {
  height: 1px;
  background: #2a2620;
  margin: 10px 0;
}

.settings-section-label {
  font-size: 8px;
  font-weight: 600;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 6px;
}

.panel-toggles {
  display: flex;
  flex-wrap: wrap;
  gap: 4px 8px;
  margin-bottom: 12px;
}

.panel-toggles label {
  font-size: 11px;
  cursor: pointer;
}

.header-error {
  color: var(--red);
  font-size: 11px;
  margin: 0;
  font-family: 'Courier New', monospace;
}

/* ── Panel (module) base ── */

.panel {
  padding-top: 28px;
}

.panel h2 {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 12px;
  color: var(--amber);
  text-transform: uppercase;
  letter-spacing: 2px;
}

.panel h3 {
  font-size: 9px;
  font-weight: 600;
  margin: 12px 0 8px;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2.5px;
}

/* ── Error ── */

.error {
  color: var(--red);
  font-size: 13px;
  margin-top: 8px;
}

/* ── Info Grid ── */

.info-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.info-item {
  background: #0c0a06;
  border-radius: 3px;
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  box-shadow: inset 1px 1px 4px rgba(0,0,0,0.5);
}

.info-label {
  font-size: 8px;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  font-weight: 600;
}

.info-item span:last-child {
  font-size: 14px;
  font-weight: 600;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
}

.info-item span.status-active {
  color: var(--green-bright);
  text-shadow: 0 0 6px rgba(90,170,90,0.3);
}

.info-item span.status-inactive {
  color: var(--cream-dim);
  text-shadow: none;
}

/* ── Scene List ── */

.scene-list {
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.scene-list li {
  background: #0c0a06;
  padding: 5px 12px;
  border-radius: 3px;
  font-size: 12px;
  color: var(--cream-dim);
  border: 1px solid #2a2620;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.4);
}

.scene-list li.active {
  border-color: var(--amber);
  color: var(--amber);
  box-shadow: 0 0 6px var(--amber-glow);
}

/* ── OBS Audio Mixer ── */

.mixer-item {
  background: #0c0a06;
  border-radius: 3px;
  padding: 10px 14px;
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  gap: 12px;
  box-shadow: inset 1px 1px 4px rgba(0,0,0,0.5);
  border: 1px solid #1a1714;
}

.mixer-item.muted {
  opacity: 0.6;
}

.mixer-name {
  font-size: 11px;
  font-weight: 600;
  min-width: 110px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--cream);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.mixer-slider-wrap {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 8px;
}

.mixer-slider {
  -webkit-appearance: none;
  appearance: none;
  flex: 1;
  height: 4px;
  border-radius: 2px;
  background: #0c0a06;
  outline: none;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
}

.mixer-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 35%, #e8c060, var(--amber) 60%, var(--amber-dim));
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 0 4px var(--amber-glow);
  border: 1px solid #2a2620;
}

.mixer-item.muted .mixer-slider::-webkit-slider-thumb {
  background: radial-gradient(circle at 40% 35%, #ee7777, var(--red) 60%, #882222);
  box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 0 4px rgba(204,68,68,0.3);
}

.mixer-db {
  font-size: 11px;
  color: var(--amber);
  min-width: 52px;
  text-align: right;
  font-variant-numeric: tabular-nums;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
}

.mixer-mute-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  color: var(--cream-dim);
  padding: 4px 10px;
  border-radius: 3px;
  font-size: 10px;
  cursor: pointer;
  min-width: 50px;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.mixer-mute-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.mixer-mute-btn.muted {
  background: linear-gradient(to bottom, #3a1818, #2a0e0e);
  border-color: var(--red);
  color: var(--red);
  box-shadow: 0 0 6px rgba(204,68,68,0.2);
}

/* ── Audio Devices Panel ── */

#audio-devices-loading {
  color: var(--cream-dim);
  font-size: 13px;
}

#audio-device-widgets {
  display: flex;
  gap: 16px;
}

.device-widget {
  flex: 1;
  background: #0c0a06;
  border-radius: 3px;
  padding: 12px 16px;
  box-shadow: inset 2px 2px 6px rgba(0,0,0,0.5);
  border: 1px solid #1a1714;
}

.device-widget h3 {
  margin: 0 0 8px;
}

.device-widget-top {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 12px;
}

.device-select {
  flex: 1;
  min-width: 0;
}

.preferred-btn {
  background: none;
  border: 1px solid #2a2620;
  color: var(--cream-dim);
  font-size: 18px;
  line-height: 1;
  padding: 2px 6px;
  border-radius: 3px;
  cursor: pointer;
  min-width: auto;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
}

.preferred-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
  background: none;
}

.preferred-btn.active {
  color: var(--amber);
  border-color: var(--amber);
  background: none;
  box-shadow: 0 0 4px var(--amber-glow);
}

/* ── Gauge + Knob Container ── */

.gauge-knob-container {
  position: relative;
  width: 120px;
  height: 120px;
  flex-shrink: 0;
}

.peak-gauge {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

.gauge-track,
.gauge-fill {
  fill: none;
  stroke-width: 6;
  stroke-linecap: round;
  stroke-dasharray: 282.74;
  stroke-dashoffset: 0;
  transform: rotate(120deg);
  transform-origin: 60px 60px;
}

.gauge-track {
  stroke: #1a1714;
}

.gauge-fill {
  stroke: var(--amber-dim);
  stroke-dashoffset: 282.74;
  transition: stroke-dashoffset 0.08s ease-out, stroke 0.2s ease-out;
}

.peak-track,
.peak-fill {
  stroke-width: 4;
  stroke-dasharray: 230.38;
  stroke-dashoffset: 0;
}

.peak-track {
  stroke: #12100e;
}

.peak-fill {
  stroke: #2a4a2a;
  stroke-dashoffset: 230.38;
  transition: stroke-dashoffset 0.08s ease-out, stroke 0.1s ease-out;
}

.knob-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.device-info-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.device-vol-pct {
  font-size: 18px;
  font-weight: 600;
  color: var(--amber);
  font-variant-numeric: tabular-nums;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
}

.device-mute-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  color: var(--cream-dim);
  padding: 4px 14px;
  border-radius: 3px;
  font-size: 10px;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 1px;
  min-width: auto;
}

.device-mute-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.device-mute-btn.muted {
  background: linear-gradient(to bottom, #3a1818, #2a0e0e);
  border-color: var(--red);
  color: var(--red);
}

/* ── Widget Header & Names ── */

.widget-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 8px;
}

.fat-quote-name {
  font-size: 16px;
  font-weight: 700;
}

.accent-red { color: var(--red); }
.accent-green { color: var(--green-bright); }
.accent-muted { color: #a89878; }

.hw-device-name {
  font-size: 10px;
  color: var(--cream-dim);
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 180px;
}

.flow-arrow {
  color: var(--amber-dim);
  font-size: 20px;
  padding: 0 8px;
  align-self: center;
}

/* ── Dual-Knob Row ── */

.dual-knob-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.knob-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.knob-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.flow-arrow-mid {
  color: var(--amber-dim);
  font-size: 24px;
  font-weight: 700;
  margin: 0 4px;
  align-self: flex-start;
  margin-top: 40px;
}

.knob-col-secondary {
  opacity: 0.45;
}

.knob-col-secondary .device-vol-pct {
  font-size: 12px;
  color: var(--cream-dim);
  text-shadow: none;
}

.knob-col-primary .obs-vol-db {
  font-size: 16px;
  text-shadow: 0 0 10px var(--amber-glow);
}

.knob-col-primary .gauge-knob-container {
  filter: brightness(1.15);
}

.knob-col-primary.obs-disconnected {
  opacity: 0.35;
  pointer-events: none;
}

.knob-col-primary.obs-disconnected .gauge-knob-container {
  filter: none;
}

.obs-source-name {
  font-size: 10px;
  color: var(--cream-dim);
  display: block;
}

.obs-vol-db {
  font-size: 14px;
  font-weight: 600;
  color: var(--amber);
  font-variant-numeric: tabular-nums;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
}

.obs-mute-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  color: var(--cream-dim);
  padding: 4px 14px;
  border-radius: 3px;
  font-size: 10px;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 1px;
  min-width: auto;
}

.obs-mute-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.obs-mute-btn.muted {
  background: linear-gradient(to bottom, #3a1818, #2a0e0e);
  border-color: var(--red);
  color: var(--red);
}

/* ── Knob Button Row ── */

.knob-btn-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.monitor-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  color: var(--cream-dim);
  padding: 4px 8px;
  border-radius: 3px;
  font-size: 8px;
  font-weight: 700;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  min-width: auto;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.monitor-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.monitor-btn.mon-only {
  border-color: var(--amber);
  color: var(--amber);
  box-shadow: 0 0 6px var(--amber-glow);
}

.monitor-btn.mon-output {
  border-color: var(--red);
  color: var(--red);
  box-shadow: 0 0 6px rgba(204,68,68,0.2);
}

/* ── Filter Knobs ── */

.filter-knobs {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid #2a2620;
}

.filter-knobs:empty {
  display: none;
}

.filter-knob-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.filter-knob-label {
  font-size: 8px;
  font-weight: 600;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 1.5px;
}

.filter-knob-value {
  font-size: 10px;
  color: var(--amber);
  font-variant-numeric: tabular-nums;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 4px var(--amber-glow);
}

/* ── Knob Ring SVG styles ── */

.knob-ring-track {
  fill: none;
  stroke: #1a1714;
  stroke-width: 2.5;
  stroke-linecap: round;
}

.knob-ring-fill {
  fill: none;
  stroke: var(--amber);
  stroke-width: 2.5;
  stroke-linecap: round;
  filter: drop-shadow(0 0 3px var(--amber-glow));
  transition: stroke-dashoffset 0.3s;
}

/* ── Pre-flight Panel ── */

.preflight-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.preflight-header h2 {
  margin-bottom: 0;
}

.preflight-buttons {
  display: flex;
  gap: 8px;
}

.btn-secondary {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  color: var(--cream-dim);
  border: 1px solid #3a3428;
  border-radius: 3px;
  padding: 5px 14px;
  font-size: 10px;
  cursor: pointer;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.btn-secondary:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.btn-secondary:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.pf-summary-bar {
  display: flex;
  gap: 12px;
  margin-bottom: 10px;
}

.pf-count {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 2px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-family: 'Courier New', monospace;
}

.pf-count.pass {
  background: #0a1a0a;
  color: var(--green-bright);
  border: 1px solid #1a3a1a;
}

.pf-count.warn {
  background: #1a1a0a;
  color: var(--amber);
  border: 1px solid #3a3a1a;
}

.pf-count.fail {
  background: #1a0a0a;
  color: var(--red);
  border: 1px solid #3a1a1a;
}

.pf-check {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 12px;
  background: #0c0a06;
  border-radius: 3px;
  margin-bottom: 4px;
  border-left: 3px solid var(--cream-dim);
  font-size: 12px;
  color: var(--cream);
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.4);
}

.pf-check.pass { border-left-color: var(--green); }
.pf-check.warn { border-left-color: var(--amber); }
.pf-check.fail { border-left-color: var(--red); }
.pf-check.skip { border-left-color: var(--cream-dim); }

.pf-icon {
  font-family: 'Courier New', monospace;
  font-size: 14px;
  min-width: 18px;
  text-align: center;
}

.pf-check.pass .pf-icon { color: var(--green-bright); }
.pf-check.warn .pf-icon { color: var(--amber); }
.pf-check.fail .pf-icon { color: var(--red); }
.pf-check.skip .pf-icon { color: var(--cream-dim); }

.pf-label {
  font-weight: 500;
  min-width: 120px;
  color: var(--cream);
}

.pf-detail {
  color: var(--cream-dim);
  flex: 1;
}

/* ── Routing Panel ── */

.routing-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.routing-header h2 {
  margin-bottom: 0;
}

.routing-buttons {
  display: flex;
  gap: 8px;
}

#routing-results.just-checked .pf-check {
  animation: route-flash 0.4s ease-out;
}

@keyframes route-flash {
  from { opacity: 0.3; }
  to { opacity: 1; }
}

.routing-auto-badge {
  font-size: 8px;
  background: #0a1a0a;
  color: var(--green-bright);
  padding: 2px 8px;
  border-radius: 2px;
  font-weight: 600;
  margin-left: 8px;
  text-transform: uppercase;
  letter-spacing: 1px;
  border: 1px solid #1a3a1a;
}

/* ── Alert Toast ── */

.alert-toast {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  border: 1px solid var(--red);
  border-radius: 3px;
  padding: 10px 16px;
  display: none;
  align-items: flex-start;
  gap: 12px;
  z-index: 1000;
  max-width: 480px;
  font-size: 12px;
  color: var(--red);
  font-family: 'Courier New', monospace;
  box-shadow: 0 4px 16px rgba(0,0,0,0.6), 0 0 8px rgba(204,68,68,0.15);
}

.alert-toast.visible {
  display: flex;
  animation: slide-in 0.3s ease-out;
}

.alert-toast-dismiss {
  background: none;
  border: 1px solid var(--red);
  color: var(--red);
  padding: 2px 8px;
  font-size: 11px;
  cursor: pointer;
  border-radius: 3px;
  min-width: auto;
  flex-shrink: 0;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
}

.alert-toast-dismiss:hover {
  background: #2a0e0e;
}

.alert-toast-action {
  background: linear-gradient(to bottom, #1a2a1a, #0e1a0e);
  border: 1px solid var(--green);
  color: var(--green-bright);
  padding: 4px 10px;
  font-size: 10px;
  cursor: pointer;
  border-radius: 3px;
  min-width: auto;
  flex-shrink: 0;
  margin-left: 4px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.alert-toast-action:hover {
  background: #1a3a1a;
}

@keyframes slide-in {
  from { transform: translateX(-50%) translateY(20px); opacity: 0; }
  to { transform: translateX(-50%) translateY(0); opacity: 1; }
}

/* ── Status colors ── */

.status-warn {
  color: var(--amber) !important;
  text-shadow: 0 0 6px var(--amber-glow) !important;
}

.status-fail {
  color: var(--red) !important;
}

/* ── Primary badge ── */

.primary-badge {
  font-size: 8px;
  background: #0a1a0a;
  color: var(--green-bright);
  padding: 2px 8px;
  border-radius: 2px;
  font-weight: 600;
  margin-left: 8px;
  border: 1px solid #1a3a1a;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* ── AI Panel ── */

.ai-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.ai-header h2 {
  margin-bottom: 0;
}

.ai-header-buttons {
  display: flex;
  gap: 8px;
  align-items: center;
}

.btn-help {
  min-width: 28px;
  padding: 4px 0;
  font-weight: 700;
  font-size: 13px;
  text-align: center;
}

.ai-help-overlay {
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 14px 18px;
  margin-bottom: 12px;
  box-shadow: inset 2px 2px 6px rgba(0,0,0,0.5);
}

.ai-help-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--amber);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.ai-help-section {
  margin-bottom: 10px;
}

.ai-help-label {
  font-size: 9px;
  font-weight: 600;
  color: var(--green-bright);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 4px;
}

.ai-help-examples {
  font-size: 11px;
  color: var(--cream-dim);
  line-height: 1.6;
  padding-left: 10px;
  font-family: 'Courier New', monospace;
}

.ai-help-close {
  margin-top: 8px;
}

.ai-notice {
  color: var(--cream-dim);
  font-size: 12px;
  font-family: 'Courier New', monospace;
}

/* ── Chat Messages (amber display style) ── */

.chat-messages {
  max-height: 300px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 12px;
  padding: 10px 14px;
  background: #0c0a06;
  border-radius: 3px;
  box-shadow:
    inset 2px 2px 6px rgba(0,0,0,0.8),
    inset -1px -1px 0 rgba(255,255,255,0.02),
    0 1px 0 rgba(255,255,255,0.04);
  font-family: 'Courier New', monospace;
}

.chat-messages::-webkit-scrollbar {
  width: 4px;
}

.chat-messages::-webkit-scrollbar-thumb {
  background: #2a2620;
  border-radius: 2px;
}

.chat-msg {
  padding: 6px 10px;
  border-radius: 3px;
  font-size: 12px;
  line-height: 1.5;
  max-width: 90%;
  word-wrap: break-word;
}

.chat-msg.user {
  background: rgba(212,160,64,0.08);
  color: var(--cream);
  align-self: flex-end;
  border: 1px solid rgba(212,160,64,0.15);
  border-bottom-right-radius: 0;
}

.chat-msg.assistant {
  background: rgba(0,212,255,0.05);
  color: var(--cream);
  align-self: flex-start;
  border: 1px solid rgba(0,212,255,0.1);
  border-bottom-left-radius: 0;
}

.chat-msg.assistant .msg-text {
  margin-bottom: 4px;
}

.chat-msg.system {
  background: none;
  color: var(--cream-dim);
  font-size: 11px;
  align-self: center;
  font-style: italic;
}

.chat-label {
  font-size: 9px;
  letter-spacing: 1.5px;
  font-weight: 700;
  margin-right: 4px;
}

.chat-label-user {
  color: var(--magenta);
  text-shadow: 0 0 6px rgba(255,0,170,0.3);
}

.chat-label-ai {
  color: var(--cyan);
  text-shadow: 0 0 6px rgba(0,212,255,0.3);
}

/* ── Actions List ── */

.actions-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 6px;
}

.action-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  padding: 4px 8px;
  border-radius: 3px;
  background: rgba(212,160,64,0.05);
  border: 1px solid #2a2620;
}

.action-icon {
  font-family: 'Courier New', monospace;
  font-size: 13px;
  min-width: 14px;
}

.action-item.executed .action-icon { color: var(--green-bright); }
.action-item.failed .action-icon { color: var(--red); }
.action-item.pending_confirmation .action-icon { color: var(--amber); }

.action-item .action-desc {
  flex: 1;
  color: var(--cream);
}

.action-undo-btn,
.action-confirm-btn {
  background: none;
  border: 1px solid #2a2620;
  color: var(--cream-dim);
  padding: 2px 8px;
  font-size: 10px;
  cursor: pointer;
  border-radius: 3px;
  min-width: auto;
  box-shadow: none;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.action-undo-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
}

.action-confirm-btn {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.action-confirm-btn:hover {
  border-color: var(--amber);
  box-shadow: 0 0 6px var(--amber-glow);
}

/* ── Chat Input Row ── */

.chat-input-row {
  display: flex;
  gap: 8px;
}

.chat-input-row input {
  flex: 1;
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 8px 12px;
  color: var(--amber);
  font-size: 12px;
  font-family: 'Courier New', monospace;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5);
  text-shadow: 0 0 6px var(--amber-glow);
  width: auto;
}

.chat-input-row input::placeholder {
  color: #3a3428;
}

.chat-input-row input:focus {
  outline: none;
  border-color: var(--amber);
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5), 0 0 4px var(--amber-glow);
}

.chat-input-row button {
  padding: 6px 18px;
}

.chat-input-row button:disabled {
  opacity: 0.3;
}

.chat-loading {
  color: var(--amber-dim);
  font-size: 11px;
  font-style: italic;
  padding: 6px 0;
}

/* ── Preset Bar ── */

.preset-bar {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding: 8px 0;
  margin-bottom: 8px;
}

.preset-bar::-webkit-scrollbar {
  height: 4px;
}

.preset-bar::-webkit-scrollbar-thumb {
  background: #2a2620;
  border-radius: 2px;
}

.preset-card {
  flex-shrink: 0;
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 10px 14px;
  cursor: pointer;
  min-width: 140px;
  max-width: 180px;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3);
  transition: all 0.15s;
}

.preset-card:hover {
  border-color: var(--amber);
  box-shadow: 0 0 8px var(--amber-glow);
}

.preset-card-icon {
  font-size: 20px;
  margin-bottom: 4px;
}

.preset-card-name {
  font-size: 10px;
  font-weight: 600;
  color: var(--cream);
  margin-bottom: 2px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.preset-card-desc {
  font-size: 10px;
  color: var(--cream-dim);
  line-height: 1.3;
}

/* ── Scenes Grid ── */

.scenes-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.scene-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.scene-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  color: var(--cream-dim);
  padding: 6px 16px;
  border-radius: 3px;
  font-size: 10px;
  cursor: pointer;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 2px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
  transition: all 0.15s;
}

.scene-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
  background: linear-gradient(to bottom, #2a2620, #1a1714);
}

.scene-btn.active {
  border-color: var(--amber);
  color: var(--amber);
  box-shadow: 0 0 8px var(--amber-glow), inset 0 1px 0 rgba(255,255,255,0.05);
  background: linear-gradient(to bottom, #2a2620, #1a1714);
}

/* ── Stream & Record ── */

.stream-record-buttons {
  display: flex;
  gap: 12px;
  margin-bottom: 10px;
}

.sr-btn {
  flex: 1;
  padding: 8px 20px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 3px;
  border: 1px solid #3a3428;
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  color: var(--cream-dim);
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 2px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.4);
}

.sr-btn:hover {
  border-color: var(--amber-dim);
  color: var(--amber);
}

.sr-btn.live {
  background: linear-gradient(to bottom, #3a1818, #2a0e0e);
  border-color: var(--red);
  color: var(--red);
  box-shadow: 0 0 8px rgba(204,68,68,0.2);
}

.sr-btn.recording {
  background: linear-gradient(to bottom, #3a1818, #2a0e0e);
  border-color: var(--red);
  color: var(--red);
  box-shadow: 0 0 8px rgba(204,68,68,0.2);
}

.stream-record-status {
  display: flex;
  gap: 16px;
}

.sr-status {
  font-size: 11px;
  color: var(--cream-dim);
  font-family: 'Courier New', monospace;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.sr-status.active {
  color: var(--green-bright);
  font-weight: 600;
  text-shadow: 0 0 6px rgba(90,170,90,0.3);
}

/* ── Voice Input ── */

.voice-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: 1px solid #3a3428;
  color: var(--cream-dim);
  padding: 6px 10px;
  border-radius: 3px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: auto;
  transition: all 0.2s ease;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  text-transform: none;
  letter-spacing: 0;
}

.voice-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
  background: linear-gradient(to bottom, #2a2620, #1a1714);
}

.voice-btn.listening {
  color: var(--red);
  border-color: var(--red);
  background: linear-gradient(to bottom, #3a1818, #2a0e0e);
  animation: pulse-mic 1.2s ease-in-out infinite;
}

.voice-btn.processing {
  color: var(--amber);
  border-color: var(--amber-dim);
  opacity: 0.7;
  cursor: wait;
}

.voice-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

@keyframes pulse-mic {
  0%, 100% { box-shadow: 0 0 0 0 rgba(204,68,68,0.4); }
  50% { box-shadow: 0 0 0 8px rgba(204,68,68,0); }
}

.chat-input-row input.voice-active {
  border-color: var(--red);
  color: var(--red);
  font-style: italic;
}

/* ── Signal Chain (Filters) Module ── */

.filter-chain-source {
  margin-bottom: 14px;
}

.filter-chain-source:last-child {
  margin-bottom: 0;
}

.filter-chain-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.filter-chain-source-name {
  font-size: 10px;
  font-weight: 600;
  color: var(--cream);
  text-transform: uppercase;
  letter-spacing: 1.5px;
}

.filter-chain-row {
  display: flex;
  align-items: stretch;
  gap: 0;
  flex-wrap: wrap;
  padding: 6px;
  background: #0c0a06;
  border-radius: 3px;
  box-shadow: inset 1px 1px 4px rgba(0,0,0,0.5);
  border: 1px solid #1a1714;
}

.filter-chain-arrow {
  display: flex;
  align-items: center;
  color: var(--amber-dim);
  font-size: 16px;
  padding: 0 6px;
  user-select: none;
}

.filter-card {
  background: linear-gradient(to bottom, #1a1714, #12100e);
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 8px 10px;
  width: 140px;
  flex-shrink: 0;
  transition: opacity 0.2s;
}

.filter-card.disabled {
  opacity: 0.4;
}

.filter-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
  gap: 4px;
}

.filter-card-name {
  font-size: 9px;
  font-weight: 600;
  color: var(--cream);
  text-transform: uppercase;
  letter-spacing: 1px;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.filter-toggle-switch {
  width: 26px;
  height: 14px;
  border-radius: 7px;
  background: #0c0a06;
  border: 1px solid #2a2620;
  position: relative;
  cursor: pointer;
  flex-shrink: 0;
  box-shadow: inset 1px 1px 2px rgba(0,0,0,0.4);
  transition: all 0.15s;
}

.filter-toggle-switch::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #3a3428;
  transition: all 0.15s;
}

.filter-toggle-switch.on {
  border-color: var(--green);
  background: #0a1a0a;
}

.filter-toggle-switch.on::after {
  left: 14px;
  background: var(--green-bright);
  box-shadow: 0 0 4px rgba(90,170,90,0.4);
}

.filter-remove-btn {
  background: none;
  border: none;
  color: var(--cream-dim);
  font-size: 12px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
  min-width: auto;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  flex-shrink: 0;
}

.filter-remove-btn:hover {
  color: var(--red);
}

.filter-card-knobs {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: center;
}

.filter-card-knob-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1px;
}

.filter-card-knob-label {
  font-size: 7px;
  font-weight: 600;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.filter-card-knob-value {
  font-size: 9px;
  color: var(--amber);
  font-variant-numeric: tabular-nums;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 4px var(--amber-glow);
}

.add-filter-btn {
  background: none;
  border: 1px solid #2a2620;
  color: var(--cream-dim);
  font-size: 9px;
  padding: 3px 10px;
  border-radius: 3px;
  cursor: pointer;
  min-width: auto;
  box-shadow: none;
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
}

.add-filter-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
}

.add-filter-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  border: 1px solid #2a2620;
  border-radius: 0 0 3px 3px;
  z-index: 50;
  min-width: 160px;
  max-height: 400px;
  overflow-y: auto;
  scrollbar-width: thin;
  box-shadow: 0 6px 16px rgba(0,0,0,0.6);
  display: none;
}

.add-filter-dropdown.open {
  display: block;
}

.add-filter-option {
  display: block;
  width: 100%;
  background: none;
  border: none;
  border-bottom: 1px solid #1a1714;
  color: var(--cream-dim);
  font-size: 11px;
  padding: 8px 14px;
  cursor: pointer;
  text-align: left;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  border-radius: 0;
}

.add-filter-option:last-child {
  border-bottom: none;
}

.add-filter-option:hover {
  background: rgba(212,160,64,0.08);
  color: var(--amber);
}

.add-filter-section-header {
  color: var(--amber-dim);
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 6px 14px 4px;
  border-bottom: 1px solid #2a2620;
  pointer-events: none;
  user-select: none;
}

/* ── Signal Chain Toolbar & Groups ── */

.signal-chain-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.signal-chain-toolbar h2 {
  margin: 0;
}

.signal-chain-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.sc-preset-dropdown-wrap {
  position: relative;
}

.sc-preset-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  border: 1px solid #2a2620;
  border-radius: 0 0 4px 4px;
  z-index: 60;
  min-width: 220px;
  max-height: 340px;
  overflow-y: auto;
  scrollbar-width: none;
  box-shadow: 0 6px 16px rgba(0,0,0,0.6);
}

.sc-preset-option {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  background: none;
  border: none;
  border-bottom: 1px solid #1a1714;
  color: var(--cream-dim);
  font-size: 11px;
  padding: 8px 12px;
  cursor: pointer;
  text-align: left;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  border-radius: 0;
  min-width: auto;
}

.sc-preset-option:last-child {
  border-bottom: none;
}

.sc-preset-option:hover {
  background: rgba(212,160,64,0.08);
  color: var(--amber);
}

.sc-preset-icon {
  font-size: 16px;
  flex-shrink: 0;
}

.sc-preset-info {
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.sc-preset-name {
  font-weight: 600;
  font-size: 11px;
}

.sc-preset-desc {
  font-size: 9px;
  color: var(--cream-dim);
  opacity: 0.7;
}

.sc-dialog {
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  border: 1px solid var(--amber-dim);
  border-radius: 4px;
  padding: 12px 14px;
  margin-bottom: 10px;
}

.sc-dialog p {
  margin: 0 0 10px 0;
  font-size: 11px;
  color: var(--cream);
}

.sc-dialog label {
  font-size: 11px;
  color: var(--cream);
  display: flex;
  align-items: center;
  gap: 8px;
}

.sc-dialog input[type="text"] {
  background: #0c0a06;
  border: 1px solid #2a2620;
  color: var(--cream);
  padding: 4px 8px;
  border-radius: 3px;
  font-size: 11px;
  flex: 1;
}

.sc-dialog-buttons {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.signal-chain-group {
  position: relative;
  margin-bottom: 16px;
  border: 1px solid #2a2620;
  border-radius: 6px;
  overflow: visible;
  background: rgba(26, 23, 20, 0.4);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.signal-chain-group:last-child {
  margin-bottom: 0;
}

.signal-chain-group.group-bypassed .group-filter-row {
  opacity: 0.35;
  pointer-events: none;
}

.group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: linear-gradient(to bottom, #201d19, #161310);
  border-bottom: 1px solid #2a2620;
  border-radius: 6px 6px 0 0;
}

.group-drag-handle {
  cursor: grab;
  color: var(--cream-dim);
  font-size: 12px;
  user-select: none;
  padding: 0 2px;
  line-height: 1;
}

.group-drag-handle:active {
  cursor: grabbing;
}

.group-name {
  font-size: 9px;
  font-weight: 600;
  color: var(--cream);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  flex: 1;
}

.group-led {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #3a3428;
  border: 1px solid #2a2620;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s;
}

.group-led.on {
  background: var(--green-bright);
  box-shadow: 0 0 6px rgba(90,170,90,0.5);
  border-color: var(--green);
}

.group-remove-btn {
  background: none;
  border: none;
  color: var(--cream-dim);
  font-size: 12px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
  min-width: auto;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  flex-shrink: 0;
}

.group-remove-btn:hover {
  color: var(--red);
}

.group-filter-row {
  display: flex;
  align-items: stretch;
  gap: 0;
  flex-wrap: wrap;
  padding: 8px;
  background: #0e0c08;
  min-height: 40px;
  transition: opacity 0.2s;
  border-radius: 0 0 6px 6px;
}

.group-filter-row.drag-over {
  outline: 2px dashed var(--amber-dim);
  outline-offset: -2px;
}

.signal-chain-group.drag-over-group {
  border-color: var(--amber);
}

.filter-card.dragging {
  opacity: 0.4;
}

.filter-card[draggable="true"] {
  cursor: grab;
}

.filter-card[draggable="true"]:active {
  cursor: grabbing;
}

.group-add-filter-btn {
  background: none;
  border: 1px solid #2a2620;
  color: var(--cream-dim);
  font-size: 9px;
  padding: 3px 10px;
  border-radius: 3px;
  cursor: pointer;
  min-width: auto;
  box-shadow: none;
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
}

.group-add-filter-btn:hover {
  color: var(--amber);
  border-color: var(--amber-dim);
}

.group-empty-msg {
  font-size: 9px;
  color: var(--cream-dim);
  opacity: 0.5;
  padding: 8px;
  text-align: center;
  font-style: italic;
}

@keyframes sc-highlight-pulse {
  0%   { box-shadow: 0 0 0 2px rgba(90, 170, 90, 0.9), 0 0 12px rgba(90, 170, 90, 0.4); }
  50%  { box-shadow: 0 0 0 3px rgba(90, 170, 90, 0.6), 0 0 18px rgba(90, 170, 90, 0.3); }
  100% { box-shadow: none; }
}

.sc-highlight-new {
  animation: sc-highlight-pulse 1.5s ease-out forwards;
}

/* ── Calibration Wizard ── */

.cal-trigger-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #2a2620;
}

.cal-status {
  font-size: 10px;
  color: var(--cream-dim);
  font-family: 'Courier New', monospace;
}

.cal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.cal-header h2 {
  margin-bottom: 0;
}

.cal-progress-bar {
  margin-bottom: 16px;
}

.cal-progress-steps {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.cal-step-label {
  font-size: 8px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--cream-dim);
  font-weight: 600;
  transition: color 0.2s;
}

.cal-step-label.active {
  color: var(--amber);
  text-shadow: 0 0 6px var(--amber-glow);
}

.cal-step-label.done {
  color: var(--green-bright);
}

.cal-progress-track {
  height: 4px;
  background: #0c0a06;
  border-radius: 2px;
  overflow: hidden;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
}

.cal-progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(to right, var(--amber-dim), var(--amber));
  border-radius: 2px;
  transition: width 0.4s ease;
}

.cal-content {
  background: #0c0a06;
  border-radius: 3px;
  padding: 20px;
  box-shadow:
    inset 2px 2px 6px rgba(0,0,0,0.8),
    inset -1px -1px 0 rgba(255,255,255,0.02),
    0 1px 0 rgba(255,255,255,0.04);
  min-height: 160px;
}

.cal-content.recording {
  animation: cal-pulse-border 1.5s ease-in-out infinite;
  border: 1px solid var(--red);
}

@keyframes cal-pulse-border {
  0%, 100% { border-color: var(--red); box-shadow: inset 2px 2px 6px rgba(0,0,0,0.8), 0 0 8px rgba(204,68,68,0.2); }
  50% { border-color: rgba(204,68,68,0.3); box-shadow: inset 2px 2px 6px rgba(0,0,0,0.8), 0 0 2px rgba(204,68,68,0.05); }
}

.cal-script {
  background: rgba(212,160,64,0.06);
  border: 1px solid rgba(212,160,64,0.15);
  border-radius: 3px;
  padding: 12px 16px;
  margin: 12px 0;
  color: var(--amber);
  font-size: 13px;
  line-height: 1.6;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
}

.cal-instruction {
  font-size: 12px;
  color: var(--cream);
  margin-bottom: 12px;
  line-height: 1.5;
}

.cal-instruction.emphasis {
  font-size: 18px;
  font-weight: 700;
  text-align: center;
  color: var(--amber);
  text-transform: uppercase;
  letter-spacing: 3px;
  text-shadow: 0 0 8px var(--amber-glow);
  margin: 16px 0;
}

.cal-live-meter {
  height: 8px;
  background: #0c0a06;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
  margin: 12px 0 4px;
}

.cal-live-meter-fill {
  height: 100%;
  width: 0%;
  border-radius: 4px;
  transition: width 0.05s linear;
  background: linear-gradient(to right, var(--green), var(--amber) 70%, var(--red) 95%);
}

.cal-live-db {
  font-size: 14px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
  text-align: center;
  font-variant-numeric: tabular-nums;
}

.cal-timer {
  font-size: 28px;
  font-weight: 700;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 10px var(--amber-glow);
  text-align: center;
  margin: 8px 0;
}

.cal-results-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 16px;
}

.cal-result-card {
  background: linear-gradient(to bottom, #1a1714, #12100e);
  border: 1px solid #2a2620;
  border-radius: 3px;
  padding: 10px 14px;
}

.cal-result-card .cal-result-label {
  font-size: 8px;
  font-weight: 600;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 4px;
}

.cal-result-card .cal-result-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 6px var(--amber-glow);
}

.cal-result-card .cal-result-detail {
  font-size: 10px;
  color: var(--cream-dim);
  margin-top: 2px;
}

.cal-filter-chain {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0;
  margin: 12px 0;
  padding: 8px;
  background: #0c0a06;
  border-radius: 3px;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.4);
}

.cal-filter-chip {
  background: linear-gradient(to bottom, #1a1714, #12100e);
  border: 1px solid var(--amber-dim);
  border-radius: 3px;
  padding: 6px 12px;
  font-size: 10px;
  font-weight: 600;
  color: var(--amber);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.cal-filter-arrow {
  color: var(--amber-dim);
  font-size: 14px;
  padding: 0 6px;
  user-select: none;
}

.cal-echo-warning {
  background: rgba(204,68,68,0.08);
  border: 1px solid rgba(204,68,68,0.25);
  border-radius: 3px;
  padding: 10px 14px;
  margin: 10px 0;
  color: var(--red);
  font-size: 12px;
  line-height: 1.5;
}

.cal-existing-warning {
  background: rgba(212,160,64,0.08);
  border: 1px solid rgba(212,160,64,0.25);
  border-radius: 3px;
  padding: 14px 18px;
  margin-top: 12px;
  color: var(--cream);
  font-size: 12px;
}

.cal-existing-warning p {
  margin-bottom: 10px;
}

.cal-warning-buttons {
  display: flex;
  gap: 8px;
}

.cal-checklist {
  list-style: none;
  margin: 12px 0;
}

.cal-checklist li {
  padding: 4px 0;
  font-size: 12px;
  color: var(--cream-dim);
}

.cal-checklist li::before {
  content: '\2610';
  margin-right: 8px;
  color: var(--amber-dim);
}

/* ── Calibration: Spectrum Canvas ── */

.cal-spectrum-canvas {
  width: 100%;
  height: 120px;
  background: #060504;
  border-radius: 3px;
  box-shadow: inset 1px 1px 4px rgba(0,0,0,0.6);
  margin-top: 10px;
  display: block;
}

/* ── Calibration: Platform Picker ── */

.cal-platform-picker {
  margin: 12px 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.cal-platform-picker label {
  font-size: 8px;
  font-weight: 600;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
}

.cal-platform-picker select {
  background: #12100e;
  border: 1px solid #2a2620;
  border-radius: 3px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  font-size: 12px;
  padding: 6px 10px;
  outline: none;
  cursor: pointer;
}

.cal-platform-picker select:focus {
  border-color: var(--amber-dim);
}

/* ── Calibration: Issues List ── */

.cal-issues-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 10px 0;
}

.cal-issue-item {
  display: flex;
  align-items: center;
  padding: 6px 10px;
  background: rgba(0,0,0,0.3);
  border-left: 3px solid var(--cream-dim);
  border-radius: 2px;
  font-size: 11px;
  color: var(--cream);
}

/* ── Calibration: Style Variant Buttons ── */

.cal-style-options {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}

.cal-style-btn {
  background: #12100e;
  border: 1px solid #2a2620;
  border-radius: 3px;
  color: var(--cream-dim);
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 5px 10px;
  cursor: pointer;
  transition: border-color 0.15s, color 0.15s, box-shadow 0.15s;
}

.cal-style-btn:hover {
  border-color: var(--amber-dim);
  color: var(--cream);
}

.cal-style-btn.selected {
  border-color: var(--amber);
  color: var(--amber);
  box-shadow: 0 0 6px var(--amber-glow);
}

/* ── Calibration: Group Style Select ── */

.cal-group-style-select {
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  font-size: 9px;
  padding: 2px 6px;
  margin-left: auto;
  outline: none;
  cursor: pointer;
}

.cal-group-style-select:focus {
  border-color: var(--amber-dim);
}

/* ── Calibration Profiles ── */

.cal-profile-select {
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  font-size: 9px;
  padding: 2px 6px;
  outline: none;
  cursor: pointer;
  max-width: 150px;
}

.cal-profile-select:focus {
  border-color: var(--amber-dim);
}

.cal-profile-save-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
}

.cal-profile-save-row input {
  flex: 1;
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  font-size: 11px;
  padding: 4px 8px;
  outline: none;
}

.cal-profile-save-row input:focus {
  border-color: var(--amber-dim);
}

.cal-profile-save-row button {
  font-size: 10px;
  padding: 4px 10px;
  min-width: auto;
  white-space: nowrap;
}

.cal-profile-delete-btn {
  margin-left: auto;
  color: var(--red);
  font-size: 14px;
  line-height: 1;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.15s;
  padding: 0 4px;
  flex-shrink: 0;
}

.sc-preset-option:hover .cal-profile-delete-btn {
  opacity: 1;
}

.cal-profile-delete-btn:hover {
  color: var(--red-bright);
}

.cal-profile-actions {
  display: flex;
  gap: 6px;
  padding: 6px 12px;
  border-top: 1px solid #1a1714;
}

.cal-profile-actions button {
  font-size: 9px;
  padding: 3px 8px;
  min-width: auto;
  opacity: 0.7;
}

.cal-profile-actions button:hover {
  opacity: 1;
}

/* ── PRO Badge ── */

.pro-badge {
  display: inline-block;
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 1px 4px;
  margin-left: 5px;
  border-radius: 3px;
  background: linear-gradient(135deg, #d4a040, #b8860b);
  color: #0c0a06;
  vertical-align: middle;
  line-height: 1.2;
  text-transform: uppercase;
}

/* ── VST Badge (filter cards) ── */

.vst-badge {
  display: inline-block;
  font-size: 7px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 1px 3px;
  margin-left: 4px;
  border-radius: 2px;
  background: #3a6b8a;
  color: #e8e0d0;
  vertical-align: middle;
  line-height: 1.2;
}

/* ── Disabled preset option ── */

.sc-preset-option.disabled,
.sc-preset-option[disabled] {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

/* ── Context Menu ── */

.ctx-menu {
  position: fixed;
  z-index: 9999;
  background: linear-gradient(to bottom, #1e1a16, #12100e);
  border: 1px solid #2a2620;
  border-radius: 4px;
  min-width: 200px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.7), 0 0 1px rgba(255,255,255,0.05);
  padding: 4px 0;
  font-size: 11px;
}

.ctx-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 7px 14px;
  color: var(--cream-dim);
  cursor: pointer;
  transition: background 0.1s, color 0.1s;
  white-space: nowrap;
}

.ctx-menu-item:hover {
  background: rgba(212,160,64,0.1);
  color: var(--amber);
}

.ctx-menu-item .ctx-check {
  width: 14px;
  text-align: center;
  font-size: 12px;
  color: var(--green-bright);
  flex-shrink: 0;
}

.ctx-menu-separator {
  height: 1px;
  background: #2a2620;
  margin: 4px 0;
}

.ctx-menu-header {
  padding: 6px 14px 4px;
  font-size: 8px;
  font-weight: 600;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  cursor: default;
  opacity: 0.6;
}
.ctx-menu-item-disabled {
  opacity: 0.4;
  pointer-events: none;
}

/* ── Layout Utilities ── */

.row { display: flex; align-items: center; gap: 16px; }
.col { display: flex; flex-direction: column; gap: 6px; align-items: center; }
.divider-v {
  width: 1px;
  background: linear-gradient(to bottom, transparent, #3a3428, transparent);
  align-self: stretch;
  margin: 0 8px;
}

/* ── Mixer Inline Controls: Pan / Sync / Tracks ── */

.mixer-divider {
  width: 1px;
  height: 28px;
  background: #2a2620;
  flex-shrink: 0;
}

.pan-control {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  flex-shrink: 0;
}

.pan-label {
  font-size: 7px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--cream-dim);
}

.pan-knob-wrap {
  position: relative;
  width: 36px;
  height: 36px;
  cursor: grab;
}

.pan-knob-wrap:active { cursor: grabbing; }

.pan-knob-svg {
  width: 36px;
  height: 36px;
}

.pan-track {
  fill: none;
  stroke: #1a1714;
  stroke-width: 3;
  stroke-linecap: round;
}

.pan-fill {
  fill: none;
  stroke: var(--amber);
  stroke-width: 3;
  stroke-linecap: round;
  filter: drop-shadow(0 0 2px var(--amber-glow));
}

.pan-dot {
  fill: var(--amber);
  filter: drop-shadow(0 0 3px var(--amber-glow));
}

.pan-center-dot {
  fill: #2a2620;
}

.pan-lr {
  font-size: 6px;
  fill: var(--cream-dim);
  font-weight: 600;
}

.pan-value {
  font-size: 9px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 4px var(--amber-glow);
  min-width: 28px;
  text-align: center;
}

.sync-control {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  flex-shrink: 0;
}

.sync-label {
  font-size: 7px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--cream-dim);
}

.sync-stepper {
  display: flex;
  align-items: center;
  gap: 0;
  border: 1px solid #2a2620;
  border-radius: 3px;
  overflow: hidden;
  background: #0c0a06;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.4);
}

.sync-btn {
  background: linear-gradient(to bottom, #2a2620, #1a1714);
  border: none;
  color: var(--amber-dim);
  width: 20px;
  height: 22px;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  user-select: none;
  padding: 0;
  min-width: auto;
  box-shadow: none;
  text-transform: none;
  letter-spacing: 0;
  border-radius: 0;
}

.sync-btn:hover {
  color: var(--amber);
  background: linear-gradient(to bottom, #3a3428, #2a2620);
}

.sync-btn:active {
  background: #1a1714;
}

.sync-value {
  font-size: 10px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 4px var(--amber-glow);
  min-width: 50px;
  text-align: center;
  padding: 0 4px;
  border-left: 1px solid #2a2620;
  border-right: 1px solid #2a2620;
  height: 22px;
  line-height: 22px;
}

.tracks-control {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  flex-shrink: 0;
}

.tracks-label {
  font-size: 7px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--cream-dim);
}

.tracks-row {
  display: flex;
  gap: 3px;
}

.track-led {
  width: 18px;
  height: 18px;
  border-radius: 3px;
  background: #12100e;
  border: 1px solid #2a2620;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  font-weight: 700;
  color: #3a3428;
  transition: all 0.15s ease;
  user-select: none;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
}

.track-led:hover {
  border-color: var(--amber-dim);
  color: var(--amber-dim);
}

.track-led.active {
  background: radial-gradient(circle at 50% 40%, #e8c060, var(--amber-dim) 80%, #3a2a10);
  border-color: var(--amber);
  color: #0c0a06;
  box-shadow: 0 0 6px var(--amber-glow), inset 0 1px 2px rgba(255,255,255,0.1);
  text-shadow: 0 0 2px rgba(0,0,0,0.5);
}

/* ── Auto-Duck Panel ── */

.ducking-controls {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px 0;
}

.ducking-toggle-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.duck-switch {
  position: relative;
  display: inline-block;
  width: 40px;
  height: 20px;
  cursor: pointer;
}

.duck-switch input { display: none; }

.duck-slider-track {
  position: absolute;
  inset: 0;
  background: #1a1714;
  border: 1px solid #2a2620;
  border-radius: 10px;
  transition: background 0.2s;
}

.duck-slider-track::before {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #5a5040;
  transition: transform 0.2s;
}

.duck-switch input:checked + .duck-slider-track {
  background: #1a2a1a;
  border-color: var(--green);
}

.duck-switch input:checked + .duck-slider-track::before {
  transform: translateX(20px);
  background: var(--green-bright);
  box-shadow: 0 0 6px rgba(90,170,90,0.4);
}

.duck-led {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.duck-led.led-green {
  background: radial-gradient(circle at 40% 35%, #88ee88, var(--green) 70%);
  box-shadow: 0 0 6px rgba(90,170,90,0.5);
}

.duck-led.led-amber-pulse {
  background: radial-gradient(circle at 40% 35%, #f0c060, var(--amber) 70%);
  box-shadow: 0 0 8px var(--amber-glow);
  animation: duck-pulse 0.6s ease-in-out infinite alternate;
}

@keyframes duck-pulse {
  from { opacity: 0.7; box-shadow: 0 0 4px var(--amber-glow); }
  to   { opacity: 1;   box-shadow: 0 0 12px var(--amber-glow); }
}

.duck-status-text {
  font-size: 11px;
  color: var(--cream-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.ducking-sources {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.duck-source-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.duck-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--cream-dim);
  min-width: 90px;
}

.duck-select {
  flex: 1;
  background: #12100e;
  border: 1px solid #2a2620;
  border-radius: 4px;
  color: var(--cream);
  padding: 4px 8px;
  font-size: 12px;
  font-family: inherit;
}

.duck-select:focus {
  outline: none;
  border-color: var(--amber-dim);
}

.ducking-params {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.duck-param {
  display: flex;
  align-items: center;
  gap: 8px;
}

.duck-param label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--cream-dim);
  min-width: 90px;
}

.duck-param input[type="range"] {
  flex: 1;
  -webkit-appearance: none;
  appearance: none;
  height: 4px;
  background: #1a1714;
  border-radius: 2px;
  outline: none;
}

.duck-param input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 35%, #c8a050, #8a6a30 80%);
  border: 1px solid #5a4418;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0,0,0,0.5);
}

.duck-param-val {
  font-size: 11px;
  color: var(--amber);
  min-width: 55px;
  text-align: right;
  font-family: 'Courier New', monospace;
}

/* ── App Capture Panel ── */

.app-capture-controls {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 4px 0;
}

.app-capture-add-row {
  display: flex;
  gap: 6px;
  align-items: center;
}

.app-capture-select {
  flex: 1;
  background: #12100e;
  border: 1px solid #2a2620;
  border-radius: 4px;
  color: var(--cream);
  padding: 4px 8px;
  font-size: 12px;
  font-family: inherit;
}

.app-capture-select:focus {
  outline: none;
  border-color: var(--amber-dim);
}

#btn-app-capture-refresh {
  padding: 4px 8px;
  font-size: 14px;
  min-width: 32px;
}

.app-capture-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.app-capture-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  background: #12100e;
  border: 1px solid var(--green);
  border-left: 3px solid var(--green);
  border-radius: 4px;
}

.app-capture-item-name {
  font-size: 12px;
  color: var(--cream);
}

.app-capture-remove-btn {
  background: none;
  border: 1px solid #3a2020;
  color: var(--red);
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 3px;
  cursor: pointer;
}

.app-capture-remove-btn:hover {
  background: rgba(204,68,68,0.15);
  border-color: var(--red);
}

.app-capture-hint {
  font-size: 10px;
  color: var(--cream-dim);
  font-style: italic;
}

/* --- Pro Spectrum Panel --- */
.spectrum-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}
.spectrum-toolbar h2 { margin: 0; }
.spectrum-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}
.spectrum-source-select {
  background: #0c0a06;
  border: 1px solid #2a2620;
  border-radius: 3px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  font-size: 9px;
  padding: 2px 6px;
  outline: none;
  cursor: pointer;
  max-width: 180px;
}
.spectrum-source-select:focus {
  border-color: var(--amber-dim);
}
.spectrum-canvas {
  width: 100%;
  height: 150px;
  background: #0a0804;
  border: 1px solid #2a2620;
  border-radius: 3px;
  display: block;
}
.spectrum-lufs-bar {
  display: flex;
  gap: 16px;
  padding: 6px 4px;
  font-family: 'Courier New', monospace;
  font-size: 11px;
}
.lufs-label {
  color: var(--cream-dim);
}
.lufs-label span {
  color: var(--amber);
  font-weight: bold;
  min-width: 50px;
  display: inline-block;
}
.spectrum-knobs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  padding: 6px 0 2px;
}
.spectrum-knob-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  min-width: 56px;
}
.spectrum-knob-col.disabled {
  opacity: 0.3;
  pointer-events: none;
}
.spectrum-knob-label {
  font-size: 8px;
  text-transform: uppercase;
  color: var(--cream-dim);
  letter-spacing: 0.5px;
}
.spectrum-knob-value {
  font-size: 10px;
  color: var(--amber);
  font-family: 'Courier New', monospace;
  min-height: 14px;
}
.spectrum-knob-col .spectrum-knob-label,
.spectrum-knob-col .spectrum-knob-value {
  transition: opacity 0.15s;
}
.spectrum-knob-col.disabled .spectrum-knob-label,
.spectrum-knob-col.disabled .spectrum-knob-value {
  color: var(--cream-dim) !important;
}
